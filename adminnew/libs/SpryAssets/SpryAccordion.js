(function(){if(typeof Spry=="undefined")window.Spry={};if(!Spry.Widget)Spry.Widget={};Spry.Widget.Accordion=function(e,t){this.element=this.getElement(e);this.defaultPanel=0;this.hoverClass="AccordionPanelTabHover";this.openClass="AccordionPanelOpen";this.closedClass="AccordionPanelClosed";this.focusedClass="AccordionFocused";this.enableAnimation=true;this.enableKeyboardNavigation=true;this.currentPanel=null;this.animator=null;this.hasFocus=null;this.previousPanelKeyCode=Spry.Widget.Accordion.KEY_UP;this.nextPanelKeyCode=Spry.Widget.Accordion.KEY_DOWN;this.useFixedPanelHeights=true;this.fixedPanelHeight=0;Spry.Widget.Accordion.setOptions(this,t,true);if(this.element)this.attachBehaviors()};Spry.Widget.Accordion.prototype.getElement=function(e){if(e&&typeof e=="string")return document.getElementById(e);return e};Spry.Widget.Accordion.prototype.addClassName=function(e,t){if(!e||!t||e.className&&e.className.search(new RegExp("\\b"+t+"\\b"))!=-1)return;e.className+=(e.className?" ":"")+t};Spry.Widget.Accordion.prototype.removeClassName=function(e,t){if(!e||!t||e.className&&e.className.search(new RegExp("\\b"+t+"\\b"))==-1)return;e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),"")};Spry.Widget.Accordion.setOptions=function(e,t,n){if(!t)return;for(var r in t){if(n&&t[r]==undefined)continue;e[r]=t[r]}};Spry.Widget.Accordion.prototype.onPanelTabMouseOver=function(e,t){if(t)this.addClassName(this.getPanelTab(t),this.hoverClass);return false};Spry.Widget.Accordion.prototype.onPanelTabMouseOut=function(e,t){if(t)this.removeClassName(this.getPanelTab(t),this.hoverClass);return false};Spry.Widget.Accordion.prototype.openPanel=function(e){var t=this.currentPanel;var n;if(typeof e=="number")n=this.getPanels()[e];else n=this.getElement(e);if(!n||t==n)return null;var r=t?this.getPanelContent(t):null;var i=this.getPanelContent(n);if(!i)return null;if(this.useFixedPanelHeights&&!this.fixedPanelHeight)this.fixedPanelHeight=r.offsetHeight?r.offsetHeight:r.scrollHeight;if(this.enableAnimation){if(this.animator)this.animator.stop();this.animator=new Spry.Widget.Accordion.PanelAnimator(this,n,{duration:this.duration,fps:this.fps,transition:this.transition});this.animator.start()}else{if(r){r.style.display="none";r.style.height="0px"}i.style.display="block";i.style.height=this.useFixedPanelHeights?this.fixedPanelHeight+"px":"auto"}if(t){this.removeClassName(t,this.openClass);this.addClassName(t,this.closedClass)}this.removeClassName(n,this.closedClass);this.addClassName(n,this.openClass);this.currentPanel=n;return n};Spry.Widget.Accordion.prototype.closePanel=function(){if(!this.useFixedPanelHeights&&this.currentPanel){var e=this.currentPanel;var t=this.getPanelContent(e);if(t){if(this.enableAnimation){if(this.animator)this.animator.stop();this.animator=new Spry.Widget.Accordion.PanelAnimator(this,null,{duration:this.duration,fps:this.fps,transition:this.transition});this.animator.start()}else{t.style.display="none";t.style.height="0px"}}this.removeClassName(e,this.openClass);this.addClassName(e,this.closedClass);this.currentPanel=null}};Spry.Widget.Accordion.prototype.openNextPanel=function(){return this.openPanel(this.getCurrentPanelIndex()+1)};Spry.Widget.Accordion.prototype.openPreviousPanel=function(){return this.openPanel(this.getCurrentPanelIndex()-1)};Spry.Widget.Accordion.prototype.openFirstPanel=function(){return this.openPanel(0)};Spry.Widget.Accordion.prototype.openLastPanel=function(){var e=this.getPanels();return this.openPanel(e[e.length-1])};Spry.Widget.Accordion.prototype.onPanelTabClick=function(e,t){if(t!=this.currentPanel)this.openPanel(t);else this.closePanel();if(this.enableKeyboardNavigation)this.focus();if(e.preventDefault)e.preventDefault();else e.returnValue=false;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;return false};Spry.Widget.Accordion.prototype.onFocus=function(e){this.hasFocus=true;this.addClassName(this.element,this.focusedClass);return false};Spry.Widget.Accordion.prototype.onBlur=function(e){this.hasFocus=false;this.removeClassName(this.element,this.focusedClass);return false};Spry.Widget.Accordion.KEY_UP=38;Spry.Widget.Accordion.KEY_DOWN=40;Spry.Widget.Accordion.prototype.onKeyDown=function(e){var t=e.keyCode;if(!this.hasFocus||t!=this.previousPanelKeyCode&&t!=this.nextPanelKeyCode)return true;var n=this.getPanels();if(!n||n.length<1)return false;var r=this.currentPanel?this.currentPanel:n[0];var i=t==this.nextPanelKeyCode?r.nextSibling:r.previousSibling;while(i){if(i.nodeType==1)break;i=t==this.nextPanelKeyCode?i.nextSibling:i.previousSibling}if(i&&r!=i)this.openPanel(i);if(e.preventDefault)e.preventDefault();else e.returnValue=false;if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;return false};Spry.Widget.Accordion.prototype.attachPanelHandlers=function(e){if(!e)return;var t=this.getPanelTab(e);if(t){var n=this;Spry.Widget.Accordion.addEventListener(t,"click",function(t){return n.onPanelTabClick(t,e)},false);Spry.Widget.Accordion.addEventListener(t,"mouseover",function(t){return n.onPanelTabMouseOver(t,e)},false);Spry.Widget.Accordion.addEventListener(t,"mouseout",function(t){return n.onPanelTabMouseOut(t,e)},false)}};Spry.Widget.Accordion.addEventListener=function(e,t,n,r){try{if(e.addEventListener)e.addEventListener(t,n,r);else if(e.attachEvent)e.attachEvent("on"+t,n)}catch(i){}};Spry.Widget.Accordion.prototype.initPanel=function(e,t){var n=this.getPanelContent(e);if(t){this.currentPanel=e;this.removeClassName(e,this.closedClass);this.addClassName(e,this.openClass);if(n){if(this.useFixedPanelHeights){if(this.fixedPanelHeight)n.style.height=this.fixedPanelHeight+"px"}else{n.style.height="auto"}}}else{this.removeClassName(e,this.openClass);this.addClassName(e,this.closedClass);if(n){n.style.height="0px";n.style.display="none"}}this.attachPanelHandlers(e)};Spry.Widget.Accordion.prototype.attachBehaviors=function(){var e=this.getPanels();for(var t=0;t<e.length;t++)this.initPanel(e[t],t==this.defaultPanel);this.enableKeyboardNavigation=this.enableKeyboardNavigation&&this.element.attributes.getNamedItem("tabindex");if(this.enableKeyboardNavigation){var n=this;Spry.Widget.Accordion.addEventListener(this.element,"focus",function(e){return n.onFocus(e)},false);Spry.Widget.Accordion.addEventListener(this.element,"blur",function(e){return n.onBlur(e)},false);Spry.Widget.Accordion.addEventListener(this.element,"keydown",function(e){return n.onKeyDown(e)},false)}};Spry.Widget.Accordion.prototype.getPanels=function(){return this.getElementChildren(this.element)};Spry.Widget.Accordion.prototype.getCurrentPanel=function(){return this.currentPanel};Spry.Widget.Accordion.prototype.getPanelIndex=function(e){var t=this.getPanels();for(var n=0;n<t.length;n++){if(e==t[n])return n}return-1};Spry.Widget.Accordion.prototype.getCurrentPanelIndex=function(){return this.getPanelIndex(this.currentPanel)};Spry.Widget.Accordion.prototype.getPanelTab=function(e){if(!e)return null;return this.getElementChildren(e)[0]};Spry.Widget.Accordion.prototype.getPanelContent=function(e){if(!e)return null;return this.getElementChildren(e)[1]};Spry.Widget.Accordion.prototype.getElementChildren=function(e){var t=[];var n=e.firstChild;while(n){if(n.nodeType==1)t.push(n);n=n.nextSibling}return t};Spry.Widget.Accordion.prototype.focus=function(){if(this.element&&this.element.focus)this.element.focus()};Spry.Widget.Accordion.prototype.blur=function(){if(this.element&&this.element.blur)this.element.blur()};Spry.Widget.Accordion.PanelAnimator=function(e,t,n){this.timer=null;this.interval=0;this.fps=60;this.duration=500;this.startTime=0;this.transition=Spry.Widget.Accordion.PanelAnimator.defaultTransition;this.onComplete=null;this.panel=t;this.panelToOpen=e.getElement(t);this.panelData=[];this.useFixedPanelHeights=e.useFixedPanelHeights;Spry.Widget.Accordion.setOptions(this,n,true);this.interval=Math.floor(1e3/this.fps);var r=e.getPanels();for(var i=0;i<r.length;i++){var s=r[i];var o=e.getPanelContent(s);if(o){var u=o.offsetHeight;if(u==undefined)u=0;if(s==t&&u==0)o.style.display="block";if(s==t||u>0){var a=new Object;a.panel=s;a.content=o;a.fromHeight=u;a.toHeight=s==t?e.useFixedPanelHeights?e.fixedPanelHeight:o.scrollHeight:0;a.distance=a.toHeight-a.fromHeight;a.overflow=o.style.overflow;this.panelData.push(a);o.style.overflow="hidden";o.style.height=u+"px"}}}};Spry.Widget.Accordion.PanelAnimator.defaultTransition=function(e,t,n,r){e/=r;return t+(2-e)*e*n};Spry.Widget.Accordion.PanelAnimator.prototype.start=function(){var e=this;this.startTime=(new Date).getTime();this.timer=setTimeout(function(){e.stepAnimation()},this.interval)};Spry.Widget.Accordion.PanelAnimator.prototype.stop=function(){if(this.timer){clearTimeout(this.timer);for(i=0;i<this.panelData.length;i++){obj=this.panelData[i];obj.content.style.overflow=obj.overflow}}this.timer=null};Spry.Widget.Accordion.PanelAnimator.prototype.stepAnimation=function(){var e=(new Date).getTime();var t=e-this.startTime;var n,r;if(t>=this.duration){for(n=0;n<this.panelData.length;n++){r=this.panelData[n];if(r.panel!=this.panel){r.content.style.display="none";r.content.style.height="0px"}r.content.style.overflow=r.overflow;r.content.style.height=this.useFixedPanelHeights||r.toHeight==0?r.toHeight+"px":"auto"}if(this.onComplete)this.onComplete();return}for(n=0;n<this.panelData.length;n++){r=this.panelData[n];var i=this.transition(t,r.fromHeight,r.distance,this.duration);r.content.style.height=(i<0?0:i)+"px"}var s=this;this.timer=setTimeout(function(){s.stepAnimation()},this.interval)}})()